# Kiro Laravel Skill 工作流

这是一个完整的 Laravel 后端开发 Claude Code Skill，将功能想法系统化地转变为高质量的代码实现。

## Skill 结构

```
kiro-laravel-skill/
├── SKILL.md                    # 主文件：核心工作流程和全局约束
├── phases/                     # 阶段提示词文件夹
│   ├── 01-requirements.md      # 第一阶段：需求明确
│   ├── 02-design.md            # 第二阶段：架构设计
│   ├── 03-tasks.md             # 第三阶段：任务规划
│   ├── 04-implementation.md    # 第四阶段：代码实现
│   ├── 05-review.md            # 第五阶段：代码复核
│   └── 06-optimization.md      # 第六阶段：代码优化
├── reference/                 # 参考文档文件夹
│   ├── DESIGN_STANDARDS.md     # 技术设计文档标准格式（9个部分）
│   ├── CODE_EXAMPLES.md        # 各层次代码的详细设计示例
│   └── REVIEW_CRITERIA.md      # 代码复核评分标准和机制
└── README.md                   # 本文件：使用说明
```

## 何时使用这个 Skill

当你需要：
- 开发 Laravel 后端功能
- 将功能想法转变为代码实现
- 进行需求梳理
- 架构设计
- 任务规划
- 代码实现
- 代码复核
- 代码优化

Claude 会自动识别并使用这个 Skill。

## 六个阶段工作流

1. **需求明确** - 将模糊想法转化为清晰的需求文档
2. **架构设计** - 基于需求创建技术实现方案
3. **任务规划** - 将设计分解为具体的编码任务
4. **代码实现** - 按照任务清单逐步实现功能
5. **代码复核** - 严格复核代码质量、规范一致性和需求符合度
6. **代码优化** - 基于复核报告进行迭代改进，确保代码质量

每个阶段都有详细的实施指南保存在 `phases/` 目录中。

## 全局约束

- ✅ 必须严格遵循六个阶段，从需求明确开始，不能跳过
- ✅ 使用 ultrathink 模式深度思考
- ✅ 必须完全了解项目代码和规范
- ✅ 语言：简体中文
- ✅ 严格遵守 `.cursor/rules` 目录规则
- ✅ 执行任务前建立 To-dos，精确到每个子任务
- ✅ 不自动执行 SQL 语句
- ✅ 从全局到细节的方法论
- ✅ 每个阶段需要用户明确确认

## 使用示例

### 开始新功能

```
用户：我想开发一个用户登录功能
Claude：好的，让我们从需求开始梳理这个用户登录功能...
```

### 继续上次任务

```
用户：继续上次任务
Claude：查看 .claude/specs/ 目录，找到上次的任务并继续...
```

### 查看当前进度

```
用户：当前进度如何？
Claude：根据 .claude/specs/{功能名}/ 下的文件判断当前阶段...
```

## 工作流程文件

每个功能在 `.claude/specs/{功能名}/` 目录下会生成以下文件：

```
.claude/specs/{功能名}/
├── requirements.md      # 第一阶段：需求文档
├── design.md           # 第二阶段：设计文档
├── tasks.md            # 第三阶段：任务清单
├── completed_tasks.md  # 第四阶段：完成状态记录
├── review.md           # 第五阶段：代码复核报告
└── optimization_log.md # 第六阶段：优化记录
```

## 阶段文件说明

### phases/ 目录

包含六个阶段的详细实施指南：

- **01-requirements.md** - 详细说明如何收集和明确需求，包括EARS格式的验收标准
- **02-design.md** - 详细说明如何进行技术设计，包括9个标准部分和强制参考文档
- **03-tasks.md** - 详细说明如何拆解任务，包括任务格式和避免的非编码任务
- **04-implementation.md** - 详细说明如何实现代码，包括实施策略和质量控制
- **05-review.md** - 详细说明如何复核代码质量，包括多维度评估和评分机制
- **06-optimization.md** - 详细说明如何优化代码，包括优化循环和终止条件

### references/ 目录

包含三个核心参考文档：

#### DESIGN_STANDARDS.md
定义技术设计文档的9个标准部分：
1. 概述
2. 系统架构
3. 核心模块设计
4. 数据库设计
5. 组件和接口设计
6. 枚举类设计
7. 请求验证设计
8. 路由设计
9. 总结

#### CODE_EXAMPLES.md
提供各层次代码的详细设计示例：
- 模型层 (Model) 设计示例
- 服务层 (Service) 设计示例
- 仓储层 (Repository) 设计示例
- 控制器层 (Controller) 设计示例
- 资源转换层 (Resource) 设计示例
- 枚举类 (Enum) 设计示例
- 请求验证 (Request) 设计示例
- 路由 (Route) 设计示例

#### REVIEW_CRITERIA.md
定义代码复核的评分标准：
- 需求符合度 (25%权重)
- 设计一致性 (25%权重)
- 代码规范性 (25%权重)
- 代码质量 (25%权重)

综合得分 >= 8.5 分为优秀，可直接完成。

## 交互方式

Claude 会用自然、友好的方式与你协作：

- "需求看起来完整了，我们可以开始架构设计了吗？"
- "设计方案感觉怎么样？如果认可的话，我可以开始拆解具体任务"
- "这个任务完成了，想要继续下一个，还是先看看现在的成果？"
- "复核评分 X.X 分，要不要开始优化提升代码质量？"

## 注意事项

1. **每个阶段都需要你的明确认可才能进入下一阶段**
2. **代码实现阶段一次只专注一个任务，不会自动继续**
3. **SQL 脚本需要你手动执行**
4. **大任务会分解成小任务，采用从全局到细节的方法**
5. **代码复核和优化确保最终代码质量达到优秀标准**

## 协作原则

1. **顺序推进** - 确保每个阶段都有坚实的基础
2. **用户主导** - 始终等待你的认可才进入下一阶段
3. **专注执行** - 实现阶段一次只专注一个任务
4. **保持上下文** - 始终基于完整的前序文档进行工作
5. **持续改进** - 支持在任何阶段返回修改和优化
6. **质量把关** - 每个阶段都有明确的完成标准

## 优化说明

此 Skill 的结构经过优化：

- **主文件精简** - skill.md 保留核心和必要的提示词
- **分阶段管理** - 每个阶段的详细提示词独立维护在 phases/ 目录
- **参考文档分离** - 标准和示例文档统一放在 references/ 目录
- **结构清晰** - 易于维护和更新，每个文件职责明确

通过这种自然、系统的协作方式，确保每个功能都经过深思熟虑，从想法到代码的每一步都稳扎稳打，最终交付出色的产品。
