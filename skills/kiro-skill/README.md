# Kiro 工作流 Skill

这是一个完整的系统化开发 Claude Code Skill，将功能想法系统化地转变为高质量的代码实现。

## Skill 结构

```
kiro-skill/
├── SKILL.md                    # 主文件：核心工作流程和全局约束
├── phases/                     # 阶段提示词文件夹
│   ├── 01-requirements.md      # 第一阶段：需求明确
│   ├── 02-design.md            # 第二阶段：架构设计
│   ├── 03-tasks.md             # 第三阶段：任务规划
│   ├── 04-implementation.md    # 第四阶段：代码实现
│   ├── 05-review.md            # 第五阶段：代码复核
│   └── 06-optimization.md      # 第六阶段：代码优化
└── README.md                   # 本文件：使用说明
```

## 何时使用这个 Skill

当你需要：
- 开发任何语言和框架的功能
- 将功能想法转变为代码实现
- 进行需求梳理
- 架构设计
- 任务规划
- 代码实现
- 代码复核
- 代码优化

Claude 会自动识别并使用这个 Skill。

## 六个阶段工作流

1. **需求明确** - 将模糊想法转化为清晰的需求文档
2. **架构设计** - 基于需求创建技术实现方案
3. **任务规划** - 将设计分解为具体的编码任务
4. **代码实现** - 按照任务清单逐步实现功能
5. **代码复核** - 严格复核代码质量、规范一致性和需求符合度
6. **代码优化** - 基于复核报告进行迭代改进，确保代码质量

每个阶段都有详细的实施指南保存在 `phases/` 目录中。

## 全局约束

- ✅ 必须严格遵循六个阶段，从需求明确开始，不能跳过
- ✅ 使用 thinkharder 模式深度思考
- ✅ 必须完全了解项目代码和规范
- ✅ 语言：简体中文
- ✅ 严格遵守 `.cursor/rules` 目录规则
- ✅ 执行任务前建立 To-dos，精确到每个子任务
- ✅ 不自动执行 SQL 语句
- ✅ 从全局到细节的方法论
- ✅ 每个阶段需要用户明确确认

## 使用示例

### 开始新功能

```
用户：我想开发一个用户登录功能
Claude：好的，让我们从需求开始梳理这个用户登录功能...
```

### 继续上次任务

```
用户：继续上次任务
Claude：查看 .claude/specs/ 目录，找到上次的任务并继续...
```

### 查看当前进度

```
用户：当前进度如何？
Claude：根据 .claude/specs/{功能名}/ 下的文件判断当前阶段...
```

## 工作流程文件

每个功能在 `.claude/specs/{功能名}/` 目录下会生成以下文件：

```
.claude/specs/{功能名}/
├── requirements.md      # 第一阶段：需求文档
├── design.md           # 第二阶段：设计文档
├── tasks.md            # 第三阶段：任务清单
├── completed_tasks.md  # 第四阶段：完成状态记录
├── review.md           # 第五阶段：代码复核报告
└── optimization_log.md # 第六阶段：优化记录
```

## 阶段文件说明

### phases/ 目录

包含六个阶段的详细实施指南：

- **01-requirements.md** - 详细说明如何收集和明确需求，包括EARS格式的验收标准
- **02-design.md** - 详细说明如何进行技术设计，包括架构、组件、数据模型等
- **03-tasks.md** - 详细说明如何拆解任务，包括任务格式和避免的非编码任务
- **04-implementation.md** - 详细说明如何实现代码，包括实施策略和质量控制
- **05-review.md** - 详细说明如何复核代码质量，包括多维度评估和评分机制
- **06-optimization.md** - 详细说明如何优化代码，包括优化循环和终止条件

## 代码复核评分机制

### 评分维度

代码复核基于四个维度进行评估，每个维度0-10分：

- **需求符合度** (25%权重) - 检查每个需求是否完全实现
- **设计一致性** (25%权重) - 验证是否遵循设计文档规范
- **代码规范性** (25%权重) - 检查是否符合编码规范
- **代码质量** (25%权重) - 评估可读性、可维护性、性能等

### 综合得分标准

- **≥ 8.5分**：代码质量优秀，可直接完成
- **6.0-8.4分**：存在改进空间，建议优化
- **< 6.0分**：必须进行优化

## 优化循环机制

- **第1轮优化**：全面修复review.md中识别的问题
- **第2轮优化**：针对剩余问题进行深度优化
- **第3轮优化**：最终精修和完善（最多进行到此轮）

### 终止条件

- 综合得分达到8.5分以上
- 或已完成3轮优化（无论得分如何）
- 或用户决定停止优化

## 交互方式

Claude 会用自然、友好的方式与你协作：

- "需求看起来完整了，我们可以开始架构设计了吗？"
- "设计方案感觉怎么样？如果认可的话，我可以开始拆解具体任务"
- "这个任务完成了，想要继续下一个，还是先看看现在的成果？"
- "复核评分 X.X 分，要不要开始优化提升代码质量？"

## 注意事项

1. **每个阶段都需要你的明确认可才能进入下一阶段**
2. **代码实现阶段一次只专注一个任务，不会自动继续**
3. **SQL 脚本需要你手动执行**
4. **大任务会分解成小任务，采用从全局到细节的方法**
5. **代码复核和优化确保最终代码质量达到优秀标准**

## 协作原则

1. **顺序推进** - 确保每个阶段都有坚实的基础
2. **用户主导** - 始终等待你的认可才进入下一阶段
3. **专注执行** - 实现阶段一次只专注一个任务
4. **保持上下文** - 始终基于完整的前序文档进行工作
5. **持续改进** - 支持在任何阶段返回修改和优化
6. **质量把关** - 每个阶段都有明确的完成标准

## 与 kiro-laravel-skill 的区别

- **kiro-skill**：通用的系统化开发工作流，适用于任何语言和框架
- **kiro-laravel-skill**：专门针对 Laravel 后端开发，包含 Laravel 特定的设计标准和代码示例

如果你在开发 Laravel 后端功能，推荐使用 **kiro-laravel-skill**。
如果你在开发其他语言或框架的功能，使用 **kiro-workflow-skill**。

## 优化说明

此 Skill 的结构经过优化：

- **主文件精简** - SKILL.md 保留核心和必要的提示词
- **分阶段管理** - 每个阶段的详细提示词独立维护在 phases/ 目录
- **结构清晰** - 易于维护和更新，每个文件职责明确
- **渐进式披露** - Claude 只在需要时读取详细的阶段指南

通过这种自然、系统的协作方式，确保每个功能都经过深思熟虑，从想法到代码的每一步都稳扎稳打，最终交付出色的产品。
