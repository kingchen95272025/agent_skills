# 阶段三：模板选择阶段详细指南

## 阶段目标

选择或确认适合的UI模板风格。

## 输入条件

- 界面规划文档（`ui_plan.md`）已完成
- 用户已确认界面规划方案

## 模板选择原则

1. 严格参考已选模板的样式和组件结构，除非用户有特殊要求，不要进行修改。
2. 必须完整读取模板文件，并严格按照模板文件的结构和样式生成代码。如果模板文件太长，需要分多次读取。
3. 图标优先使用FontAwesome开源图标库，非必要不使用图标，避免滥用。
4. 严格遵循界面规划，按照ui_plan.md中的设计实现。
5. 使用模板样式系统，基于选定模板的样式和组件。
6. 代码结构清晰，HTML/CSS/JS分离清晰，层次分明。
7. 详细代码注释，关键逻辑必须有注释说明。
8. 语义化HTML，使用语义化标签，提升可读性。
9. 响应式设计，支持不同屏幕尺寸。
10. 直接可运行，无需构建工具，浏览器直接打开即可运行。

## 执行步骤

### 步骤1：展示可用模板

向用户介绍所有可用的UI模板，包括内置模板和用户自定义模板。

#### 1.1 列出内置模板

**模板1：at-ui-style（默认推荐）**

**风格特点**：
- 主色调：#E94609（橙红色）
- 设计风格：现代、专业、动感
- 视觉效果：渐变按钮、卡片投影、丰富的动画效果
- 组件特色：
  - 按钮：渐变背景 + 悬停光泽动画
  - 卡片：左侧色条 + 阴影提升效果
  - 状态标签：渐变背景 + 圆点图标 + 脉冲动画
  - 表格：悬停行高亮 + 微小提升效果
  - 模态框：毛玻璃背景 + 滑入动画

**适用场景**：
- 通用B端管理系统
- 需要现代化视觉效果的项目
- 强调品牌色彩的系统
- 需要丰富交互反馈的应用

**参考示例**：`.claude/ui.html`

---

**模板2：ant-design-style**

**风格特点**：
- 主色调：#1890ff（蓝色）
- 设计风格：专业、简洁、高效
- 视觉效果：精简、一致、专业
- 组件特色：
  - 按钮：扁平设计 + 微妙阴影
  - 卡片：简洁边框 + 少量阴影
  - 状态标签：纯色背景 + 圆角标签
  - 表格：清晰分隔线 + 简洁交互
  - 模态框：白色背景 + 淡入动画

**适用场景**：
- 企业级应用
- 数据密集型系统
- 需要专业严谨形象的项目
- 大型团队协作的系统

---

**模板3：element-plus-style**

**风格特点**：
- 主色调：#409EFF（天蓝色）
- 设计风格：清新、友好、易用
- 视觉效果：柔和、舒适、亲和
- 组件特色：
  - 按钮：圆角设计 + 柔和阴影
  - 卡片：轻阴影 + 圆角
  - 状态标签：柔和色彩 + 圆角
  - 表格：柔和分隔 + 舒适间距
  - 模态框：圆角 + 柔和动画

**适用场景**：
- 中后台系统
- 内部工具和管理系统
- 需要友好界面的应用
- 中小型团队使用的系统

#### 1.2 检查用户自定义模板

检查 `templates/custom/` 目录下是否有用户添加的自定义模板。

如果有，展示自定义模板：
```
"我还发现您添加了自定义模板：
- [模板名称]：[从README.md读取的说明]

您也可以选择使用自定义模板。"
```

### 步骤2：推荐模板

根据需求特点，推荐最合适的模板。

#### 2.1 推荐逻辑

**根据业务场景推荐**：
- **采购/订单管理** → at-ui-style（强调操作，需要明确的视觉反馈）
- **数据分析/报表** → ant-design-style（专业、数据密集）
- **库存/物流管理** → element-plus-style（友好、易用）

**根据用户提及的偏好推荐**：
- 提到"现代"、"动感"、"炫酷" → at-ui-style
- 提到"专业"、"简洁"、"企业级" → ant-design-style
- 提到"友好"、"清新"、"易用" → element-plus-style

**根据功能复杂度推荐**：
- 功能复杂、交互频繁 → at-ui-style（丰富的交互反馈）
- 数据展示为主 → ant-design-style（专注内容）
- 功能适中 → element-plus-style（平衡）

#### 2.2 推荐话术

```
"根据您的[业务场景/需求特点]，我推荐使用 [模板名称]，
理由是：
1. [理由1]
2. [理由2]
3. [理由3]

当然，您也可以选择其他模板，或者告诉我您的偏好，
我可以调整推荐。"
```

### 步骤3：用户确认

#### 3.1 让用户选择模板

```
"请您选择UI模板风格：
1. at-ui-style（默认）- 现代、动感、丰富
2. ant-design-style - 专业、简洁、高效
3. element-plus-style - 清新、友好、易用
[4. 自定义模板（如有）]

您选择哪个模板呢？"
```

#### 3.2 确认定制化需求

如果用户有定制化要求，询问具体需求：

```
"好的，使用 [模板名称]。

是否需要定制化调整？例如：
- 修改主色调（默认：[颜色代码]）
- 调整组件样式
- 其他定制需求

如果使用默认样式即可，我们就继续下一步。"
```

**定制化调整说明**：
- 主色调修改：简单，只需替换CSS变量
- 组件样式调整：中等难度，需要修改具体的CSS规则
- 大幅度定制：建议用户创建自定义模板

### 步骤4：加载模板

#### 4.1 读取模板文件

根据用户选择，读取对应的模板文件：

```bash
templates/[模板名]/template.html
```

#### 4.2 提取模板的样式系统

如果template.html太长，需要分多次读取。必须完整读取模板文件，并严格按照模板文件的结构和样式生成代码。

从template.html中提取：
- **CSS样式规则**：所有的样式定义
- **组件结构模式**：按钮、表单、表格、模态框等的HTML结构
- **JavaScript交互模式**：事件处理、状态管理的代码模式
- **颜色系统**：主色、辅助色、状态色等

#### 4.3 准备用于代码生成

将提取的内容准备好，用于下一阶段的代码生成：
- 页面基础模板（HTML结构、CSS样式、JS框架）
- 组件代码片段（按钮、表单、表格等）
- 样式变量（如果需要定制化）

### 步骤5：记录选择

创建 `.claude/ui-generator/{功能名}/template_choice.md` 文件，记录模板选择信息。

**文档模板**：
```markdown
# 模板选择记录

## 选择的模板

**模板名称**：[模板名]

**选择理由**：
- [理由1]
- [理由2]

## 模板特点

**风格**：[风格描述]

**主色调**：[颜色代码]

**适用场景**：[场景说明]

## 定制化要求

[如果有定制化要求，记录在这里]

或

无定制化要求，使用默认样式。

## 模板文件路径

`templates/[模板名]/template.html`

## 模板加载状态

✅ 模板文件已读取
✅ 样式系统已提取
✅ 组件结构已准备
✅ 准备进入代码生成阶段

## 用户确认

- ✅ 用户已确认模板选择
- ✅ 定制化要求已确认（如有）
```

## 输出成果

- 创建 `.claude/ui-generator/{功能名}/template_choice.md` 文件
- 模板文件已读取并准备好用于代码生成

## 完成标准

- ✅ 已选择具体的模板
- ✅ 模板风格符合需求
- ✅ 定制化要求明确（如有）
- ✅ 模板文件已加载成功
- ✅ 用户已确认选择

## 评估维度

- **选择合理性（60%）**：模板是否符合场景需求
- **模板质量（40%）**：模板是否完整可用

## 常见问题处理

### Q1：用户不知道选哪个模板怎么办？

主动展示对比，帮助用户决策：

```
"让我帮您对比一下这三个模板的差异：

**视觉风格**：
- AT-UI：现代、动感、色彩鲜明
- Ant Design：专业、简洁、务实
- Element Plus：清新、友好、柔和

**适合的业务**：
- AT-UI：订单管理、采购管理（操作频繁，需要清晰反馈）
- Ant Design：数据分析、报表系统（专注内容展示）
- Element Plus：库存管理、内部工具（平衡功能与易用性）

根据您的[具体业务]，我推荐 [模板名]，您觉得呢？"
```

### Q2：用户想要多个模板混合怎么办？

说明限制，提供替代方案：

```
"每次生成只能使用一个模板，但我可以：
1. 先用一个模板生成，看效果
2. 如果不满意，可以用另一个模板重新生成
3. 或者，您可以创建一个自定义模板，混合两个模板的特点

您希望采用哪种方式？"
```

### Q3：用户想要修改模板怎么办？

引导用户创建自定义模板：

```
"如果您需要大幅度定制模板样式，建议创建自定义模板：

1. 在 templates/custom/ 目录下创建新文件夹
2. 复制现有模板的 template.html
3. 修改样式和结构
4. 创建 README.md 说明模板特点

创建完成后，我就可以使用您的自定义模板了。

需要我指导您如何创建自定义模板吗？"
```

### Q4：模板文件损坏或缺失怎么办？

提示错误，提供解决方案：

```
"抱歉，[模板名] 的模板文件似乎不完整或损坏。

可能的解决方案：
1. 选择其他模板
2. 检查 templates/[模板名]/template.html 文件是否存在
3. 如果是内置模板，可能需要重新安装UI Skill

您想选择其他模板，还是需要帮助排查问题？"
```

## 推进到下一阶段

完成本阶段后，使用以下方式确认推进：

```
"模板选择完成！您选择了 [模板名]，[模板特点简述]。

模板已加载成功，所有样式和组件都准备好了。

现在可以开始生成代码了，预计会生成 [N] 个HTML文件，
包含完整的 [核心功能列表]。

准备开始生成代码吗？"
```
