# 第二阶段：六阶段流程设计

## 阶段概述

基于第一阶段的需求分析，设计完整的六阶段工作流程，包括每个阶段的目标、输入输出、评估体系等。

## 触发条件

- 第一阶段的 `requirements.md` 已完成并获得用户认可
- 或用户明确表示要进行流程设计

## 阶段目标

1. 设计符合需求的六个工作阶段框架
2. 为每个阶段定义清晰的目标、输入、输出
3. 设计专业的多维度评估体系（用于第4阶段）
4. 设计流程控制逻辑和阶段推进机制
5. 生成完整的流程设计文档

## 具体工作内容

### 2.1 阶段框架设计

基于需求分析，设计六个连续的工作阶段。使用以下设计表格：

#### 六阶段设计模板

| 阶段 | 阶段名称 | 核心目标 | 输入条件 | 输出成果 | 文件名 |
|------|----------|----------|----------|----------|--------|
| 1 | {分析阶段} | 深度理解和需求明确 | 用户原始需求 | {分析文档} | {file1}.md |
| 2 | {设计阶段} | 架构规划和方案设计 | 分析结果 | {设计方案} | {file2}.md |
| 3 | {创作阶段} | 具体内容创作实施 | 设计方案 | {核心成果} | {file3}.md |
| 4 | {评估阶段} | 多维度质量评估 | 创作成果 | 评估报告 | review.md |
| 5 | {优化阶段} | 基于评估的改进 | 评估报告 | 优化成果 | {file5}.md |
| 6 | {交付阶段} | 最终格式化交付 | 优化成果 | 最终交付 | final.md |

#### 阶段命名原则

1. **第1阶段**：通常是"理解"、"分析"、"明确"类型
   - 示例：需求明确、内容构思、问题分析

2. **第2阶段**：通常是"设计"、"规划"、"架构"类型
   - 示例：架构设计、大纲设计、方案规划

3. **第3阶段**：通常是"实施"、"创作"、"实现"类型
   - 示例：内容创作、代码实现、方案执行

4. **第4阶段**：固定为"评估"、"复核"、"审查"
   - 固定文件名：review.md

5. **第5阶段**：固定为"优化"、"改进"、"迭代"
   - 文件名通常与第3阶段相关

6. **第6阶段**：通常是"交付"、"发布"、"定稿"
   - 固定文件名：final.md

### 2.2 评估维度设计

为第4阶段（质量评估）设计专业的评估体系。应包含4-5个评估维度，每个维度有明确的评分标准。

#### 评估维度设计模板

```markdown
## 评估维度设计

### 核心评估维度（4-5个）

#### 维度1：{维度名称} (权重：{百分比}%)

**评估内容**：
- {评估要点1}
- {评估要点2}
- {评估要点3}

**评分标准（0-10分）**：
- **9-10分（优秀）**：{优秀标准描述}
- **7-8分（良好）**：{良好标准描述}
- **5-6分（及格）**：{及格标准描述}
- **0-4分（不及格）**：{不及格标准描述}

#### 维度2：{维度名称} (权重：{百分比}%)

**评估内容**：
- {评估要点1}
- {评估要点2}
- {评估要点3}

**评分标准（0-10分）**：
[同上结构]

#### 维度3：{维度名称} (权重：{百分比}%)
[同上结构]

#### 维度4：{维度名称} (权重：{百分比}%)
[同上结构]

### 综合评分机制

**计算公式**：
```
综合得分 = 维度1得分 × 权重1 + 维度2得分 × 权重2 + ... + 维度N得分 × 权重N
```

**质量等级**：
- **≥8.5分**：优秀 - 可直接进入交付阶段
- **6.0-8.4分**：良好 - 建议优化后交付
- **<6.0分**：需改进 - 必须优化

### 优化策略

**第一轮优化**（综合得分 < 8.5）：
- 重点解决评分最低的维度问题
- 针对性改进具体薄弱环节
- 目标：提升至8.0分以上

**第二轮优化**（如果第一轮后仍 < 8.5）：
- 全面打磨细节
- 优化次低分维度
- 目标：达到8.5分

**第三轮优化**（如果仍需要）：
- 最后的精细调整
- 追求完美细节
- 这是最后一轮，之后无论得分如何都将交付
```

#### 不同领域的评估维度示例

**内容创作类**：
1. 内容质量（30%）- 准确性、深度、价值
2. 结构逻辑（25%）- 组织、流畅、连贯
3. 语言表达（25%）- 清晰、专业、易读
4. 用户体验（20%）- 实用性、可操作性

**技术开发类**：
1. 需求符合度（25%）- 功能完整性
2. 设计一致性（25%）- 架构符合度
3. 代码规范（25%）- 编码标准
4. 代码质量（25%）- 可维护性、性能

**产品设计类**：
1. 需求准确性（30%）- 理解深度
2. 方案完整性（25%）- 覆盖全面性
3. 可行性（25%）- 实现难度评估
4. 创新性（20%）- 解决方案独特性

### 2.3 流程控制逻辑设计

#### 阶段识别机制

```markdown
## 自动阶段识别

基于文件存在性判断当前阶段：

无文件 → 第1阶段（{阶段1名称}）
存在{file1}.md → 第2阶段（{阶段2名称}）
存在{file2}.md → 第3阶段（{阶段3名称}）
存在{file3}.md → 第4阶段（{阶段4名称}）
存在review.md → 第5阶段（{阶段5名称}）或第6阶段（根据评分）
存在{file5}.md → 第6阶段（{阶段6名称}）
存在final.md → 流程完成
```

#### 阶段推进确认

每个阶段完成时的自然确认方式：

1. **第1阶段完成**："{阶段1成果}已经完成，{具体内容描述}。准备好进入{阶段2名称}了吗？"

2. **第2阶段完成**："{阶段2成果}设计完成，{具体内容描述}。可以开始{阶段3名称}了吗？"

3. **第3阶段完成**："{阶段3成果}已创作完成。现在让我进行全面的{评估类型}，检查质量如何？"

4. **第4阶段完成**：
   - 高分（≥8.5）："评估得分{X.X}分，质量优秀！可以直接{交付/定稿}了吗？"
   - 中分（6.0-8.4）："评估得分{X.X}分，发现一些改进空间。要优化一下吗？"
   - 低分（<6.0）："评估得分{X.X}分，建议进行优化。让我帮您改进这些问题。"

5. **第5阶段完成**："优化完成，得分从{旧分}提升到{新分}。{继续优化/准备交付}？"

6. **第6阶段完成**："{最终成果}已经完成！整个流程圆满结束。"

### 2.4 工作流文档生成

创建 `.claude/skill-creator/{skill-name}/workflow_design.md` 文档，包含以下完整结构：

```markdown
# {Skill名称} 工作流设计文档

生成时间：{日期}
基于需求文档：requirements.md

## 1. 六阶段流程概览

### 1.1 阶段设计表

| 阶段 | 阶段名称 | 核心目标 | 输入条件 | 输出成果 | 文件名 |
|------|----------|----------|----------|----------|--------|
| 1 | {阶段1} | {目标1} | {输入1} | {输出1} | {file1}.md |
| 2 | {阶段2} | {目标2} | {输入2} | {输出2} | {file2}.md |
| 3 | {阶段3} | {目标3} | {输入3} | {输出3} | {file3}.md |
| 4 | {阶段4} | {目标4} | {输入4} | {输出4} | review.md |
| 5 | {阶段5} | {目标5} | {输入5} | {输出5} | {file5}.md |
| 6 | {阶段6} | {目标6} | {输入6} | {输出6} | final.md |

### 1.2 流程图

```
用户需求
    ↓
阶段1: {阶段1名称}
    ↓
阶段2: {阶段2名称}
    ↓
阶段3: {阶段3名称}
    ↓
阶段4: {阶段4名称}（质量评估）
    ├→ 得分≥8.5 → 阶段6: {阶段6名称}
    └→ 得分<8.5 → 阶段5: {阶段5名称}
                      ↓
                  再次评估
                      ↓
                  阶段6: {阶段6名称}
```

## 2. 各阶段详细设计

### 2.1 第一阶段：{阶段1名称}

**核心目标**：{详细目标描述}

**触发条件**：
- {条件1}
- {条件2}

**主要工作**：
1. {工作内容1}
2. {工作内容2}
3. {工作内容3}

**输出成果**：{file1}.md
- {成果内容描述}
- {成果结构说明}

**完成标准**：
- {标准1}
- {标准2}

**确认方式**："{自然语言确认问句}"

### 2.2 第二阶段：{阶段2名称}
[同样的结构...]

### 2.3 第三阶段：{阶段3名称}
[同样的结构...]

### 2.4 第四阶段：{阶段4名称}（质量评估）
[包含完整的评估维度设计...]

### 2.5 第五阶段：{阶段5名称}
[包含优化策略...]

### 2.6 第六阶段：{阶段6名称}
[包含最终交付要求...]

## 3. 评估体系设计

### 3.1 评估维度

[详细的4-5个评估维度设计]

### 3.2 评分机制

[评分计算方法和质量等级]

### 3.3 优化策略

[多轮优化的具体策略]

## 4. 流程控制

### 4.1 阶段识别

[自动阶段识别逻辑]

### 4.2 推进机制

[阶段推进确认方式]

### 4.3 异常处理

[缺少前置条件、工作流中断等的处理方式]

## 5. 文件管理

### 5.1 目录结构

```
.claude/{目录名}/{主题名}/
├── {file1}.md         # 第一阶段
├── {file2}.md         # 第二阶段
├── {file3}.md         # 第三阶段
├── review.md          # 第四阶段
├── {file5}.md         # 第五阶段（如需要）
├── final.md           # 第六阶段
└── optimization_log.md # 优化记录
```

### 5.2 进度跟踪

[如何通过文件跟踪进度]

## 6. 设计说明

### 6.1 设计思路

{解释为什么这样设计六个阶段}

### 6.2 与需求的对应

{说明流程设计如何满足需求分析中的要求}

### 6.3 特色功能

{说明这个工作流的独特之处}
```

## 重要约束

1. **六阶段完整性**
   - 必须包含完整的六个阶段
   - 第4阶段必须是评估，第5阶段必须是优化
   - 阶段之间必须有清晰的输入输出关系

2. **评估体系专业性**
   - 评估维度必须与领域特征匹配
   - 评分标准必须明确、可操作
   - 权重分配必须合理（总和100%）

3. **流程逻辑合理性**
   - 阶段推进必须基于文件状态
   - 确认方式必须自然、友好
   - 异常情况必须有处理机制

4. **用户确认机制**
   - 必须等待用户的明确认可才能进入下一阶段
   - 如果用户要求修改，必须调整设计并再次确认
   - 必须继续反馈-修订循环直到获得明确批准

## 交互示例

### 示例：流程设计讨论

**AI**: "基于您的需求分析，我为{Skill名称}设计了六个工作阶段：

1. **{阶段1}**：{简短描述}
2. **{阶段2}**：{简短描述}
3. **{阶段3}**：{简短描述}
4. **{阶段4}**：{简短描述}
5. **{阶段5}**：{简短描述}
6. **{阶段6}**：{简短描述}

这个流程设计的核心思路是{设计思路}。感觉这样的流程合理吗？"

**用户**: "前三个阶段看起来不错，但是第3阶段的粒度是不是太大了？"

**AI**: "您说得对。第3阶段确实可以拆分得更细致。我考虑调整为：
- 原第3阶段 → 拆分为两个子阶段
- 或者在第3阶段内部增加中间检查点

您倾向于哪种方式？或者有其他建议？"

**用户**: "在第3阶段内部增加检查点吧，不要拆太多阶段。"

**AI**: "好的，我会在第3阶段设计中增加中间检查点机制，让进度更可控。现在让我看看评估维度的设计..."

[继续讨论评估体系]

**AI**: "流程设计文档已生成！包括：
- 完整的六阶段设计
- 4个专业评估维度（{列出维度}）
- 清晰的流程控制逻辑

请查看workflow_design.md，如果认可的话，我们就可以开始生成完整的Skill了！"

## 完成标志

当满足以下条件时，第二阶段完成：

1. ✅ 已创建 `workflow_design.md` 文档
2. ✅ 六阶段设计完整且逻辑清晰
3. ✅ 评估体系设计专业且可操作
4. ✅ 流程控制逻辑合理
5. ✅ 用户明确认可流程设计

## 自然确认询问

阶段完成时，使用以下方式之一确认：

- "六阶段工作流设计完成，每个阶段的目标和逻辑都很清晰。准备好生成完整的Skill了吗？"
- "流程设计看起来很完善，从{阶段1}到{阶段6}形成了完整的闭环。可以进入Skill生成阶段了吗？"
- "工作流和评估体系都设计好了，感觉怎么样？要不要开始生成实际的Skill文件？"

## 进入下一阶段

用户明确同意后，进入第三阶段：**Skill完整生成**
