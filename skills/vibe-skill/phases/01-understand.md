# 第一阶段：理解 (Understand)

## 触发条件

- 用户提出新的开发任务
- 用户描述需要修复的问题
- 用户请求帮助实现某个功能

## 阶段目标

深入理解项目现状、代码规范和用户需求，为后续的规划和执行奠定坚实基础。

## 我的工作

### 1. 项目结构扫描

- 快速浏览项目目录结构，了解技术栈
- 识别关键目录和文件（如 app、routes、config 等）
- 了解项目使用的框架版本和依赖

### 2. 规范规则收集

**必须执行**：通读并严格遵守 `.cursor/rules` 目录指定的所有规则

- 阅读所有 .mdc 规则文件
- 识别规则文件中指定的参考文件
- 理解项目的编码规范、命名约定、架构约束
- 记录关键的规范要点

### 3. 相关代码分析

基于用户需求，分析涉及的相关代码：

- 定位需求涉及的现有代码模块
- 理解现有代码的实现方式和设计模式
- 分析代码之间的依赖关系
- 识别可能受影响的其他模块

### 4. 上下文收集

收集完整的上下文信息：

- 相关的数据模型和表结构
- 现有的服务层和仓储层实现
- 路由和控制器的组织方式
- 枚举类和常量的定义方式
- 异常处理和错误码规范

### 5. 需求理解

深入理解用户需求：

- 明确用户想要实现什么功能
- 识别需求中的隐含要求
- 考虑边缘情况和异常场景
- 如有不清楚的地方，及时询问

## 输出内容

向用户简要汇报理解到的关键信息：

```markdown
## 项目理解

### 技术栈
- [框架和版本信息]
- [关键依赖]

### 相关模块
- [涉及的现有模块]
- [依赖关系说明]

### 规范要点
- [关键编码规范]
- [需要遵守的约束]

### 需求理解
- [对用户需求的理解]
- [识别到的关键点]

### 待确认问题（如有）
- [需要和用户确认的问题]
```

## 重要约束

- **不能跳过规范阅读** - 必须阅读 `.cursor/rules` 下的规则文件
- **不能假设** - 不清楚的地方要询问用户或查阅代码
- **不能急于实现** - 理解阶段不写代码，只做分析
- **上下文要充分** - 宁可多收集信息，不要遗漏关键点

## 与用户的交互

理解阶段完成后，自然地过渡到规划阶段：

- "我已经了解了项目的整体架构和你的需求，让我来规划一下实现方案..."
- "基于对项目的理解，我有几个问题想和你确认一下..."
- "项目规范我已经看过了，接下来我来制定实现计划..."

## 完成标志

- 完成项目结构和规范的理解
- 完成相关代码的分析
- 完成需求的理解和确认
- 向用户汇报理解结果
- 用户确认理解无误或回答了待确认问题
